<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projects | My Portfolio</title>
<style>
body { font-family: Arial; color:#fff; background: linear-gradient(-45deg,#1e3c72,#2a5298,#0f9b0f,#ff4500); background-size:400% 400%; animation: gradientBG 15s ease infinite; min-height:100vh; padding:20px;}
@keyframes gradientBG {0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; }}
h1{text-align:center;}
.accordion{display:flex;flex-direction:column;gap:20px; max-width:900px; margin:auto;}
.accordion-item{background:rgba(255,255,255,0.1); border-radius:10px; overflow:hidden; cursor:pointer; transition:all 0.3s; min-height:70px;}
.accordion-header{display:flex;align-items:center;gap:15px;padding:20px;background:rgba(255,255,255,0.2); font-weight:bold;}
.accordion-header img{width:70px;height:50px;object-fit:cover;border-radius:5px;}
.accordion-content{max-height:0; overflow:hidden; padding:0 20px; transition:max-height 0.4s ease; display:flex; flex-direction:column; align-items:center; gap:15px;}
.accordion-item.active .accordion-content{max-height:700px;padding:20px;}
.accordion-content img{width:300px;height:180px; object-fit:cover;border-radius:5px;}
.accordion-content a{color:#0ff;text-decoration:underline;font-weight:bold;}
</style>
</head>
<body>

<h1>My Projects</h1>
<div class="accordion" id="projectsAccordion"></div>

<script>
const PROJECTS_JSON = "https://res.cloudinary.com/YOUR_CLOUD_NAME/raw/upload/projects_site/projects.json";
const accordion = document.getElementById("projectsAccordion");

async function loadProjects(){
  try {
    const res = await fetch(PROJECTS_JSON);
    if(!res.ok) throw new Error("Failed to fetch projects.json");
    const projects = await res.json();

    projects.forEach(proj => {
      const item = document.createElement("div");
      item.className="accordion-item";
      item.innerHTML=`
        <div class="accordion-header">
          <img src="${proj.img}" alt="Project Thumbnail">
          <span>${proj.name}</span>
        </div>
        <div class="accordion-content">
          <img src="${proj.img}" alt="Project Full Image">
          <p>${proj.desc}</p>
          <a href="${proj.link}" target="_blank">GitHub Link</a>
        </div>
      `;
      accordion.appendChild(item);
    });

    // Accordion toggle behavior
    const items = document.querySelectorAll('.accordion-item');
    items.forEach(item=>{
      const header = item.querySelector('.accordion-header');
      header.addEventListener('click',()=>{
        items.forEach(i=>{if(i!==item){i.classList.remove('active'); i.querySelector('.accordion-content').style.maxHeight=null;}});
        item.classList.toggle('active');
        const content=item.querySelector('.accordion-content');
        content.style.maxHeight = item.classList.contains('active') ? content.scrollHeight+"px" : null;
      });
    });

  } catch(err){
    console.error("Error loading projects:", err);
    accordion.innerHTML="<p style='text-align:center;color:#fff;'>Failed to load projects.</p>";
  }
}

loadProjects();
</script>

</body>
</html>